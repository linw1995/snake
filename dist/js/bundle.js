!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,i){"use strict";function n(e){switch(e.arrayFormat){case"index":return function(t,i,n){return null===i?[s(t,e),"[",n,"]"].join(""):[s(t,e),"[",s(n,e),"]=",s(i,e)].join("")};case"bracket":return function(t,i){return null===i?s(t,e):[s(t,e),"[]=",s(i,e)].join("")};default:return function(t,i){return null===i?s(t,e):[s(t,e),"=",s(i,e)].join("")}}}function r(e){var t;switch(e.arrayFormat){case"index":return function(e,i,n){if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t)return void(n[e]=i);void 0===n[e]&&(n[e]={}),n[e][t[1]]=i};case"bracket":return function(e,i,n){return t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0===n[e]?void(n[e]=[i]):void(n[e]=[].concat(n[e],i)):void(n[e]=i)};default:return function(e,t,i){if(void 0===i[e])return void(i[e]=t);i[e]=[].concat(i[e],t)}}}function s(e,t){return t.encode?t.strict?l(e):encodeURIComponent(e):e}function o(e){return Array.isArray(e)?e.sort():"object"===(void 0===e?"undefined":a(e))?o(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=i(5),c=i(4);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){t=c({arrayFormat:"none"},t);var i=r(t),n=Object.create(null);return"string"!=typeof e?n:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),r=t.shift(),s=t.length>0?t.join("="):void 0;s=void 0===s?null:decodeURIComponent(s),i(decodeURIComponent(r),s,n)}),Object.keys(n).sort().reduce(function(e,t){var i=n[t];return Boolean(i)&&"object"===(void 0===i?"undefined":a(i))&&!Array.isArray(i)?e[t]=o(i):e[t]=i,e},Object.create(null))):n},t.stringify=function(e,t){t=c({encode:!0,strict:!0,arrayFormat:"none"},t);var i=n(t);return e?Object.keys(e).sort().map(function(n){var r=e[n];if(void 0===r)return"";if(null===r)return s(n,t);if(Array.isArray(r)){var o=[];return r.slice().forEach(function(e){void 0!==e&&o.push(i(n,e,o.length))}),o.join("&")}return s(n,t)+"="+s(r,t)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,i,n){for(var r=0;r<e.length;r++)if(e[r]==i&&t[r]==n)return r;return-1}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t,i){n(this,e),this.width=t,this.height=i,this.snakeSpeed=500}return s(e,[{key:"init",value:function(){var e=new ArrayBuffer(this.width*this.height);this._canvasData=new Uint8Array(e),this._i=new Array,this._j=new Array,this._ti=new Array,this._tj=new Array,this.produceTarget(),this.snakeLength=5,this.lose=!1,this.newBody(Math.floor(this.height/2),Math.floor(this.width/2),5),this.direction=0,this.predirection=0}},{key:"newBody",value:function(e,t,i){for(;i--;)this._i.push(e),this._j.push(t-i)}},{key:"index",value:function(e,t){return e*this.width+t}},{key:"cell",value:function(e,t){return this._canvasData[this.index(e,t)]}},{key:"set",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.cell(e,t);return this._canvasData[this.index(e,t)]=i,n}},{key:"clear",value:function(){for(var e=this._canvasData.length;e--;)this._canvasData[e]=0}},{key:"produceTarget",value:function(){function e(e,t){return Math.floor(Math.random()*(t-e+1)+e)}var t=e(0,this.height-1),i=e(0,this.width-1);this._ti.push(t),this._tj.push(i)}},{key:"fillPath",value:function(){for(var e=0;e<this._ti.length;e++){for(var t=this._ti[e],i=this._tj[e],n=0;n<this.height;n++)this.set(n,i,3);for(var r=0;r<this.width;r++)this.set(t,r,3)}}},{key:"comunicate",value:function(e,t){e%Math.floor(this.snakeSpeed/t)!=0||this.lose||this.computeNextState()}},{key:"computeNextState",value:function(){this.clear();var e=this._i[this._i.length-1],t=this._j[this._i.length-1];switch(this.direction){case 0:++t>this.width-1&&(t=0);break;case 1:--e<0&&(e=this.height-1);break;case 2:--t<0&&(t=this.width-1);break;default:++e>this.height-1&&(e=0)}for(this.direction!=this.predirection&&(this.predirection=this.direction),this._i.push(e),this._j.push(t);this._i.length>this.snakeLength;)this._i.shift(),this._j.shift();this.fillPath();for(var i=0;i<this._ti.length;i++)this.set(this._ti[i],this._tj[i],2);for(var n=0;n<this._i.length;n++){var s=this.set(this._i[n],this._j[n],1);if(1==s)this.lose=!0;else if(2==s){this.snakeLength+=1;var o=r(this._ti,this._tj,this._i[n],this._j[n]);this._ti.splice(o,1),this._tj.splice(o,1),this.produceTarget()}}}}]),e}();t.default=o},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i,r){var s=this;n(this,e),this.canvas=t,this.engine=i,this.renderer=r,this.listeners=[],this.addEvents([{eventType:"keydown",callback:this.keyIsDown.bind(this)},{eventType:"mousedown",callback:this.mouseIsDown.bind(this)},{eventType:"touchmove",callback:function(e){for(var t=0;t<e.touches.length;t++)s.mouseDirection(e.touches[t])}}])}return r(e,[{key:"addEvents",value:function(){var e=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t){e.listeners.push(t);var i=document;t.selector&&(i=document.querySelector(t.selector)),i.addEventListener(t.eventType,t.callback)})}},{key:"setDirection",value:function(e){var t=this.engine.predirection;switch(e){case"ArrowRight":this.engine.direction=2===t?2:0;break;case"ArrowUp":this.engine.direction=3===t?3:1;break;case"ArrowLeft":this.engine.direction=0===t?0:2;break;case"ArrowDown":this.engine.direction=1===t?1:3}}},{key:"keyIsDown",value:function(e){this.setDirection(e.key)}},{key:"mouseDirection",value:function(e){var t=this.canvas.getBoundingClientRect(),i=(e.clientX-t.left)/(t.right-t.left)*this.canvas.clientWidth,n=(e.clientY-t.top)/(t.bottom-t.top)*this.canvas.clientHeight,r=~~(n/this.renderer.pixelsPerCell),s=~~(i/this.renderer.pixelsPerCell),o=this.engine._i[this.engine._i.length-1],a=this.engine._j[this.engine._j.length-1],l=Math.sqrt(2)/2,c=a-o*l,h=a+o*l,u=s-(r*l+c),f=s-(-r*l+h);u>=0&&f>=0?this.setDirection("ArrowRight"):u>=0&&f<0?this.setDirection("ArrowUp"):u<0&&f<0?this.setDirection("ArrowLeft"):this.setDirection("ArrowDown")}},{key:"mouseIsDown",value:function(e){0===e.button&&this.mouseDirection(e)}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,e),this.canvas=t,this.context=t.getContext("2d"),this.engine=i,this.pixelsPerCell=r.pixelsPerCell||5,this.desiredFPS=r.desiredFPS||30,this.fpsNode=r.fpsNode||!1,this.strokeStyle=r.strokeStyle||{1:"rgba(255, 118, 5, 0.5)",2:"rgba(22, 45, 122, 0.5)",3:"rgba(42, 85, 244, 0.5)"},this.fillStyle=r.fillStyle||{1:"rgba(222, 122, 39 , 0.5)",2:"rgba(200, 200, 230, 0.5)",3:"rgba(230, 239, 254, 0.5)"},this.play=!1,this.fpsTime=0,this.engineTime=0,this.fps=0,this.frameNumber=0,this.canvas.width=this.engine.width*this.pixelsPerCell,this.canvas.height=this.engine.height*this.pixelsPerCell}return r(e,[{key:"togglePlay",value:function(){this.play=!this.play}},{key:"draw",value:function(e){window.requestAnimationFrame(this.draw.bind(this)),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle="#f1f8ff",this.context.fillRect(0,0,this.canvas.width,this.canvas.height);for(var t=0;t<this.engine.height;t++)for(var i=0;i<this.engine.width;i++)this.engine.cell(t,i)&&(this.context.strokeStyle=this.strokeStyle[this.engine.cell(t,i)],this.context.fillStyle=this.fillStyle[this.engine.cell(t,i)],this.context.strokeRect(this.pixelsPerCell*i,this.pixelsPerCell*t,this.pixelsPerCell,this.pixelsPerCell),this.pixelsPerCell>1&&this.context.fillRect(this.pixelsPerCell*i,this.pixelsPerCell*t,this.pixelsPerCell,this.pixelsPerCell));var n=e-this.engineTime;if(n>1e3/this.desiredFPS&&this.play&&(this.engine.comunicate(this.frameNumber,this.desiredFPS),this.frameNumber+=1,this.engineTime=e-n%(1e3/this.desiredFPS)),this.fpsNode){var r=e-this.fpsTime;r>500&&(this.fps=1e3/r*this.frameNumber,this.fpsNode.textContent=this.fps.toFixed(2)+" FPS",this.fpsTime=e,this.frameNumber=0)}this.engine.lose&&(this.context.font="100px Arial",this.context.fillStyle=this.fillStyle[1],this.context.strokeStyle=this.strokeStyle[1],this.context.textAlign="center",this.context.fillText("You Lost",this.canvas.width/2,this.canvas.height/2),this.context.strokeText("You Lost",this.canvas.width/2,this.canvas.height/2))}},{key:"start",value:function(){this.engine.computeNextState(),this.play=!0,window.requestAnimationFrame(this.draw.bind(this))}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,a,l=n(e),c=1;c<arguments.length;c++){i=Object(arguments[c]);for(var h in i)s.call(i,h)&&(l[h]=i[h]);if(r){a=r(i);for(var u=0;u<a.length;u++)o.call(i,a[u])&&(l[a[u]]=i[a[u]])}}return l}},function(e,t,i){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){r.init(),s.start()}var t=document.querySelector(v.canvasSelector),i=~~(t.clientWidth/v.pixelsPerCell),n=~~(t.clientHeight/v.pixelsPerCell),r=new o.default(i,n);window.engine=r,r.snakeSpeed=v.snakeSpeed;var s=new l.default(t,r,{desiredFPS:v.desiredFPS,pixelsPerCell:v.pixelsPerCell,fpsNode:document.querySelector(v.fpsNodeSelector),strokeStyle:v.strokeStyle,fillStyle:v.fillStyle}),a=function(e){s.togglePlay(),e.target.textContent="Pause"===e.target.textContent?"Play":"Pause"},c=function(t){e()};new h.default(t,r,s).addEvents([{selector:v.playButtonSelector,eventType:"click",callback:a},{selector:v.restartButtonSelector,eventType:"click",callback:c}]),e()}var s=i(1),o=n(s),a=i(3),l=n(a),c=i(2),h=n(c),u=i(0),f=n(u),d={canvasSelector:"#universe",fpsNodeSelector:"#fps-info",playButtonSelector:"#ctrl-play-pause",restartButtonSelector:"#ctrl-restart",desiredFPS:60,snakeSpeed:500,pixelsPerCell:45,strokeStyle:{1:"rgba(255, 118, 5, 0.5)",2:"rgba(0, 0, 0, 0.5)",3:"rgba(42, 85, 244, 0.5)"},fillStyle:{1:"rgba(222, 122, 39 , 0.5)",2:"rgba(0, 0, 0, 0.5)",3:"rgba(230, 239, 254, 0.5)"}},p=f.default.parse(window.location.search),v=Object.assign(d,p);v.desiredFPS=parseInt(v.desiredFPS,10),v.pixelsperCell=parseInt(v.pixelsperCell,10),v.snakeSpeed=parseInt(v.snakeSpeed,10),window.onload=r}]);